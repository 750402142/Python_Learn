# Pyechartsç¯‡

## é…ç½®æ–‡æ¡£

1. ç¬¬ä¸€ç§é€šè¿‡å…³é”®å­—ä¼ å‚

2. é€šè¿‡å­—å…¸ä¼ å‚

   ```bar
   bar = Bar()
   bar.add_xaxis(["è¡¬è¡«", "ç¾Šæ¯›è¡«", "é›ªçººè¡«", "è£¤å­", "é«˜è·Ÿé‹", "è¢œå­"])
   bar.add_yaxis("å•†å®¶A", [5, 20, 36, 10, 75, 90])
   bar.add_yaxis("å•†å®¶B", [15, 25, 16, 55, 48, 8])
   bar.set_global_opts(title_opts={"text": "ä¸»æ ‡é¢˜", "subtext": "å‰¯æ ‡é¢˜"})
   bar.render("bar.html")
   ```

> [!NOTE]
>
> å­—å…¸ä¼ å‚æ—¶,å¦‚ä½•æ‰¾åˆ°è¿™äº›å‚æ•°?

```python
class TitleOpts(BasicOpts):
    def __init__(
        self,
        is_show: bool = True,
        title: Optional[str] = None,
        title_link: Optional[str] = None,
        title_target: Optional[str] = "blank",
        subtitle: Optional[str] = None,
        subtitle_link: Optional[str] = None,
        subtitle_target: Optional[str] = "blank",
        pos_left: Optional[str] = None,
        pos_right: Optional[str] = None,
        pos_top: Optional[str] = None,
        pos_bottom: Optional[str] = None,
        padding: Union[Sequence, Numeric] = 5,
        item_gap: Numeric = 10,
        text_align: str = "auto",
        text_vertical_align: str = "auto",
        is_trigger_event: bool = False,
        title_textstyle_opts: Union[TextStyleOpts, dict, None] = None,
        subtitle_textstyle_opts: Union[TextStyleOpts, dict, None] = None,
    ):
        self.opts: Sequence = [
            {
                "show": is_show,
                "text": title,
                "link": title_link,
                "target": title_target,
                "subtext": subtitle,
                "sublink": subtitle_link,
                "subtarget": subtitle_target,
                "left": pos_left,
                "right": pos_right,
                "top": pos_top,
                "bottom": pos_bottom,
                "padding": padding,
                "itemGap": item_gap,
                "textAlign": text_align,
                "textVerticalAlign": text_vertical_align,
                "triggerEvent": is_trigger_event,
                "textStyle": title_textstyle_opts,
                "subtextStyle": subtitle_textstyle_opts,
            }
        ]
```

æŸ¥çœ‹é…ç½®çš„æºç ,é‡Œé¢æœ‰å…³é”®è¯ä¼ å‚,è¿˜æœ‰å°±æ˜¯ç”¨å­—å…¸ä¼ å‚.



## ä¸»é¢˜ç¯‡

å¯ä»¥ä½¿ç”¨Initoptsåˆå§‹åŒ–é…ç½®é¡¹,é…ç½®ä¸»é¢˜,widthè®¾å®šä¸€èˆ¬æ˜¯100%, height=95vh, è®¾å®šbgcolor

> [!IMPORTANT]
>
> è‡ªå®šä¹‰ä¸»é¢˜çš„ä½¿ç”¨.
>
> ä¸»é¢˜ç¼–è¾‘å™¨: https://echarts.apache.org/zh/theme-builder.html



1. å¯ä»¥ä½¿ç”¨echartså®˜ç½‘æä¾›çš„ä¸»é¢˜é…ç½®å·¥å…·

### åŸºæœ¬é…ç½®é¡¹

![image-20241111144450962](./image/image-20241111144450962.png)

### è§†è§‰æ˜ å°„é…ç½®

![image-20241111144718542](./image/image-20241111144718542.png)



### åæ ‡è½´é…ç½®

![image-20241111144948425](./image/image-20241111144948425.png)

### å›¾ä¾‹é…ç½®

![image-20241111145049701](./image/image-20241111145049701.png)

ä¸»è¦æ˜¯é»‘è‰²èƒŒæ™¯ä¸‹æ–‡å­—çš„æ ·å¼.

### å·¥å…·ç®±é…ç½®

![image-20241111145151093](./image/image-20241111145151093.png)

### æç¤ºæ¡†

![image-20241111145250295](./image/image-20241111145250295.png)

è¿™é‡ŒæŒ‡çš„æ˜¯çº¿æ¡ç¯é¢œè‰²å’Œç²—ç»†

### æ—¶é—´è½®æ’­ç»„ä»¶

![image-20241111145509595](./image/image-20241111145509595.png)

###  æŠ˜çº¿å›¾

![image-20241111145637547](./image/image-20241111145637547.png)

### ä¸»é¢˜çš„ä¸‹è½½ä¸ä½¿ç”¨

![image-20241111145738066](./image/image-20241111145738066.png)

2. é‡è¦: å°†ä¸‹è½½çš„ä¸»é¢˜,æ”¾åˆ°é™æ€èµ„æºæœåŠ¡å™¨çš„æŒ‡å®šçš„ç›®å½•ä¸‹.`./pyecharts-assets-master/assets/themes`ç›®å½•ä¸‹

   æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„å»ºè®®,åº”è¯¥æ”¾åœ¨,`./pyecharts-assets-master/assets/v5/themes`ç›®å½•ä¸‹,å› æ­¤æœ€å¥½ä¸¤è€…éƒ½æ”¾ä¸€ä¸‹

```python
## è¡¥å……å†…å®¹:
from pyecharts import options as opts
from pyecharts.charts import Bar
from pyecharts.faker import Faker
from pyecharts.globals import ThemeType
from pyecharts.globals import CurrentConfig
from pyecharts.datasets import register_url
register_url("http://127.0.0.1:8000/")
CurrentConfig.ONLINE_HOST = "http://127.0.0.1:8000/assets/"

from pyecharts.datasets import register_files
register_files({"mytheme": ["themes/mytheme", "js"]}) # æ³¨å†Œä¸»é¢˜æ–‡ä»¶,éœ€è¦æ³¨æ„ç‚¹æ˜¯,ä¸»é¢˜çš„åç§°æœ€å¥½å’Œæ–‡ä»¶åä¸€è‡´.


c = (
    Bar(init_opts=opts.InitOpts(theme='mytheme'))
    .add_xaxis(Faker.choose())
    .add_yaxis("å•†å®¶A", Faker.values())
    .add_yaxis("å•†å®¶B", Faker.values())
    .set_global_opts(
        title_opts=opts.TitleOpts(title="Bar-Y è½´ formatter"),
        yaxis_opts=opts.AxisOpts(axislabel_opts=opts.LabelOpts(formatter="{value} /æœˆ")),
    )
)
c.render_notebook()
```

```python
# é€šè¿‡å›¾å½¢çš„é…ç½®å‚æ•°,å¯ä»¥å®ç°ä¸€äº›ç‰¹æ®Šçš„æ•ˆæœ.
c.options['xAxis'][0]['splitLine'] = False
c.render_notebook()
```

## é™æ€èµ„æºæœåŠ¡å™¨

pyecharts ä½¿ç”¨çš„æ‰€æœ‰é™æ€èµ„æºæ–‡ä»¶å­˜æ”¾äº [pyecharts-assets](https://github.com/pyecharts/pyecharts-assets) é¡¹ç›®ä¸­ï¼Œé»˜è®¤æŒ‚è½½åœ¨ `https://assets.pyecharts.org/assets/`

æˆ–è€…å¯ä»¥åœ¨: https://github.com/pyecharts/pyecharts-assets ä¸‹è½½. 

ä¸‹è½½ä¹‹å,å¯åŠ¨æœåŠ¡å™¨,è®¾å®šHost

### **Localhost-Server**

å¯åŠ¨æœåŠ¡å™¨

```
$ cd pyecharts-assets
$ python -m http.server
```

è®¾ç½® host

```
# åªéœ€è¦åœ¨é¡¶éƒ¨å£°æ˜ CurrentConfig.ONLINE_HOST å³å¯
from pyecharts.globals import CurrentConfig

CurrentConfig.ONLINE_HOST = "http://127.0.0.1:8000/assets/"

# æ¥ä¸‹æ¥æ‰€æœ‰å›¾å½¢çš„é™æ€èµ„æºæ–‡ä»¶éƒ½ä¼šæ¥è‡ªåˆšå¯åŠ¨çš„æœåŠ¡å™¨
from pyecharts.charts import Bar
bar = Bar()
```

### ç¬¬ä¸‰æ–¹åœ°å›¾æ–‡ä»¶

æ¥è‡ªäºåœ°å›¾å·¥åŒ ç§˜ç±ä¸­çš„åœ°å›¾æ–‡ä»¶.

![image-20241111152930121](./image/image-20241111152930121.png)

```
from pyecharts.datasets import register_url
register_url("http://127.0.0.1:8000/")
```

```python
from pyecharts.datasets import register_url
data_pair = [['åä¸­',100]]
# æ³¨å†Œæœ¬åœ°æœåŠ¡å™¨çš„åœ°å›¾æ•°æ®æº
register_url("http://127.0.0.1:8000/")
from pyecharts.charts import Map
maps = (Map(init_opts=opts.InitOpts(theme=ThemeType.DARK,bg_color='#404a59'))
    .add(series_name='é”€é‡',data_pair=data_pair,maptype='ä¸­å›½ä¸ƒå¤§åŒº',
        is_map_symbol_show=False,  # å…³é—­åœ°å›¾ä¸Šçš„ç‚¹
        label_opts=opts.LabelOpts(is_show=False)
        )
       )
maps.render_notebook()
```

### è‡ªå®šä¹‰åœ°å›¾-å•ä¸ªåœ°å›¾

å¯¹äºæ¥è‡ªäº:GeoJson.ioç½‘ç«™æ„å»ºçš„åœ°å›¾,æ˜¯å¯ä»¥ç›´æ¥æ·»åŠ ç»˜åˆ¶çš„,è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,æ¯”å¦‚å…ˆæ³¨å†Œåœ°å›¾,æ‰å¯ä»¥ä½¿ç”¨

```python
import json

with open('./åœ°å›¾èµ„æº/é™•ç”˜å®-é»‘å‰è¾½.geojson','r', encoding='utf-8') as f:
    target_data = json.loads(f.read())
    

map=(Map()
    .add_js_funcs(f"echarts.registerMap('é™•ç”˜å®-é»‘å‰è¾½', {target_data});")
    .add('å±±æ²³å››çœ',data_pair=[['é™•è¥¿çœ',100]],maptype='é™•ç”˜å®-é»‘å‰è¾½',is_map_symbol_show=False)
    .set_global_opts(visualmap_opts=opts.VisualMapOpts(max_=100000,min_=20000))
    )
map.render_notebook()
```

è¿™é‡Œæ”¯æŒå¯¹åœ°å›¾è¿›è¡Œè‡ªå®šä¹‰çš„å¢åˆ æ”¹æŸ¥.

> [!NOTE]
>
> .add_js_funcs(f"echarts.registerMap('é™•ç”˜å®-é»‘å‰è¾½', {target_data});") # å¦‚æœæ³¨å†Œåœ°å›¾æ–‡ä»¶æ˜¯åœ¨geoè¿›è¡Œçš„,é‚£ä¹ˆç»˜å›¾éœ€è¦ä½¿ç”¨Geoè¿›è¡Œç»˜åˆ¶,è‹¥æƒ³ä½¿ç”¨Gridç»„ä»¶ç»„åˆè¿™äº›å›¾è¡¨,åˆ™éœ€è¦ä½¿ç”¨Gridç»„ä»¶é‡æ–°æ³¨å†Œåœ°å›¾.





### è‡ªå®šä¹‰åœ°å›¾-å¤šä¸ªåœ°å›¾èåˆ

1. datav é˜¿é‡Œåœ°å›¾å·¥å…·: https://datav.aliyun.com/portal/school/atlas/area_selector

```python
import os
def get_target_data(filepath, mapname = ''):
    target_data = """{
            "type": "FeatureCollection",
            "features": []}"""
    target_data = json.loads(target_data)
    list_region = os.listdir(filepath)
    name_list = []
    for lr in list_region:
        with open(f"{filepath}/{lr}", 'r', encoding='utf-8') as f:
            temp = json.load(f)
            temp = temp['features']
            for tp in temp:
                name = tp['properties']['name']
                # å°†areaåŠ å…¥tpèŠ‚ç‚¹å¹¶ä¼ å…¥target_data
                tp['properties']['area'] = mapname
                target_data['features'].append(tp)
                name_list.append((name, np.random.randint(100, 5000)))
    return target_data
```

æ³¨æ„: è¿™é‡Œfilepathæ˜¯æŒ‡ç›®æ ‡åœ°å›¾æ–‡ä»¶å­˜æ”¾çš„ä½ç½®.

> [!WARNING]
>
> é—®é¢˜: åœ°å›¾è½®å»“å¦‚ä½•è¿›è¡Œåˆ é™¤?



## åœ°å›¾å¯è§†åŒ–å·¥å…·foliumä½¿ç”¨

### é—®é¢˜1: é™æ€èµ„æºçš„æ›¿æ¢

```python
def update_map(mapname='map.html'):
    """
    ç”¨äºæ›¿æ¢åœ°å›¾çš„é™æ€èµ„æºæ–‡ä»¶
    mapname: é»˜è®¤çš„åœ°å›¾æ–‡ä»¶å
    """
    import re
    with open(mapname,mode='r', encoding='utf-8') as f:
        html = f.read()

    css_partten = '|'.join(re.findall('(rel="stylesheet" href="https://.+/).*?.css"',html))
    html = re.sub(css_partten,r'rel="stylesheet" href="local/css/',html)
    js_partten = '|'.join(re.findall('(https://.+/).*?.js',html))
    html = re.sub(js_partten,r'local/js/',html)

    with open(mapname,mode='w',encoding='utf-8') as f:
        f.write(html)
    print('åœ°å›¾é™æ€èµ„æºæ›¿æ¢å®Œæˆ')
```

### æ·»åŠ æ–¹å‘ç®­å¤´

æ–¹æ³•1: é€šè¿‡plugins.PolyLineTextPathå®ç°ç®­å¤´ç»˜åˆ¶

æ–¹æ³•2: é€šè¿‡è®¡ç®—å‰åä¸¤ç‚¹çš„åæ ‡æ¥å®ç°ç®­å¤´æ–¹å‘çš„è®¡ç®—

```python

# é£æœºå›¾ä¾‹
from folium import plugins
map_center = [41.7010994,123.4920807]
maps =folium.Map(location=map_center,
    tiles=tiles,
    attr="é«˜å¾·-å¸¸è§„",
    zoom_start=12
                )

re = folium.PolyLine(
    [i[:2] for i in route],
    weight=3,
    color='green',
    opacity=0.6,
).add_to(maps)

# è­¦å‘Šå›¾ä¾‹
attr = {'fill': 'red'}
# é£æœºå›¾ä¾‹
aircraft = {'font-weight': 'bold', 'font-size': '24'}

plugins.PolyLineTextPath(
    re,
    '   ğŸƒâ€â¡ï¸ ', # å›¾ä¾‹æ ·å¼,.å¯ä»¥ä½¿ç”¨unicodeç¬¦å·,ğŸ’—  # \u2708  é£æœº  ğŸƒâ€â¡ï¸ â¡ â¬†
    repeat=True,
    offset=6,
    attributes=aircraft
).add_to(maps)
# #å®šä¹‰ä¸€ä¸ªç©ºåˆ—è¡¨å°†
use_location=[]
for i in range(len(location)):
    position_atitu = [location[i][0], location[i][1]]
    use_location.append([location[i][0], location[i][1]])
    if i < len(location) - 1:
        dx = location[i + 1][0] - location[i][0]  # dx
        dy = location[i + 1][1] - location[i][1]  # dy
        angle1 = math.atan2(dx, dy)
        angle2 = -int(angle1 * 180 / math.pi)
        mid_location = [location[i][0]+dx/2,location[i][1]+dy/2]
        #ä¸‰è§’å½¢å›¾å½¢æŒ‡ç¤ºæ–¹å‘ï¼Œç”±äºrotationçš„è§’åº¦æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œ
        folium.Marker(position_atitu, popup='<i>ç»´åº¦:</i>'+str(location[i][0])+'<br><i>ç»åº¦:</i>'+str(location[i][1])+'<br><i>city_name:</i>').add_to(maps)

        folium.RegularPolygonMarker(mid_location, fill_color='black', number_of_sides=3, radius=5,
                                rotation=angle2).add_to(maps)
    else:
        folium.Marker(position_atitu, popup='<i>ç»´åº¦:</i>'+str(location[i][0])+'<br><i>ç»åº¦:</i>'+str(location[i][1])+'<br><i>city_name:</i>').add_to(maps)
        
maps.save("test.html")
update_map('test.html')
```

## åºåˆ—å·Pyechartsæ–‡ä»¶

è¿™é‡Œå¯ä»¥ä½¿ç”¨pickleæ¨¡å—è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ“ä½œ.å¯ä»¥å°†pyechartsç”Ÿæˆçš„æ–‡ä»¶,

```
with open('./test','wb') as f:
	f.write(pickle.dumps(maps)) # è¿™æ˜¯åºåˆ—åŒ–,å›¾åƒå¯¹è±¡
	f.write(pickle.dumps(maps.option)
```

åºåˆ—åŒ–å›¾åƒå¯¹è±¡,åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥ç›´æ¥ååºåˆ—åŒ–æ–‡ä»¶,ç„¶åç›´æ¥æ¸²æŸ“

åºåˆ—åŒ–å›¾åƒé…ç½®é¡¹, åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥ååºåˆ—åŒ–é…ç½®é¡¹,è€Œä¸”å¿…é¡»è¦å…ˆå®ä¾‹åŒ–ä¸€ä¸ªå›¾åƒå¯¹è±¡,ç„¶åä½¿ç”¨updateæ–¹æ³•æ›´æ–°é…ç½®é¡¹

## Streamlitæ¨¡å—

1. åŸºæœ¬çš„æ–‡æœ¬ç»„ä»¶
2. é€‰æ‹©ç»„ä»¶: å•é€‰æ¡†,å¤šé€‰æ¡†â€¦.
3. ä¾§è¾¹æ : from streamlit_option_menu import option_menu 
4. æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½
5. é¡µé¢çš„å¸ƒå±€: st.columnsç»„ä»¶ä½¿ç”¨
6. htmlæ¸²æŸ“: åœ¨æ¸²æŸ“Pyechartsæ—¶,ä½¿ç”¨: from streamlit.components.v1 import html è¿›è¡Œæ¸²æŸ“
7. foliumåœ°å›¾æ¸²æŸ“æ—¶: from streamlit_folium import st_folium è¿›è¡Œæ¸²æŸ“





## å¯è§†åŒ–è¿›é˜¶å›¾è¡¨

### å•è½´æ•£ç‚¹å›¾

éœ€è¦æ³¨æ„çš„æ˜¯æ•°æ®çš„æ„å»º,é€šå¸¸æƒ…å†µæˆ‘ä»¬å°†æ•°æ®é›†å‘½åä¸ºall_infoæ˜¯ä¸€ä¸ªåµŒå¥—çš„åˆ—è¡¨,è¿™é‡Œæ˜¾ç¤ºä¸ºdataframe.

![image-20241111171117295](./image/image-20241111171117295.png)

æ ¸å¿ƒç»˜å›¾å‡½æ•°å¦‚ä¸‹,è¿™é‡Œæ¯”è¾ƒå…³å¿ƒçš„æ˜¯æ•°æ®é›†,å’Œç±»ç›®çš„æ•°é‡,ç±»ç›®æ•°é‡ä¸€èˆ¬ä¸å»ºè®®è¶…è¿‡7ä¸ª.

```
def get_sca(allinfo, num=7): # allinfoæ˜¯æ•°æ®æº, numæ˜¯è½´çš„æ•°é‡,ä½ æœ‰å‡ ä¸ªç±»ç›®,è¿™é‡Œå°±ä¼ å‡ ä¸ª,
    from pyecharts.charts import Scatter,Tab
    colors = ['#7c8bd1', '#a7d791', '#f8d47a', '#ee8786', '#95cce5', '#f99f76', 'violet','orange',
             '#7c8bd1', '#a7d791',]
    colors1 = ['#ff0000', '#3c7ef7', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffffff','cyan',
              '#ff0000', '#3c7ef7',] # è¿™é‡Œçš„é¢œè‰²,å¿…é¡»è¦å¤§äºè½´çš„æ•°é‡
    single_axis, titles = [], []     #  åˆ›å»ºä¸¤ä¸ªç©ºåˆ—è¡¨,ç”¨äºå­˜æ”¾æ‰€æœ‰çš„è½´,ä»¥åŠæ ‡é¢˜
    sca = Scatter() # å®ä¾‹åŒ–ä¸€ä¸ªæ•£ç‚¹å›¾å¯¹è±¡
    for idx, day in enumerate(list(set([i[0] for i in allinfo]))):       # æŒ‰å¤©éå†æ•°æ®
        sca.add_xaxis(xaxis_data=hours)  # æ·»åŠ xè½´
        single_axis.append({    # è®¾å®šæ¯ä¸ªè½´çš„æ ·å¼
            'left': '5%',        # åæ ‡è½´è·ç¦»åæ ‡ç‚¹ä½ç½®
            'right': '53%',
            'bottom': '2%',
             'nameGap': 20,    # åæ ‡è½´åç§°è·ç¦»è½´çº¿çš„ä½ç½®
            'nameLocation': 'start',   # åæ ‡è½´åç§°çš„ä½ç½®
            'type': 'category',     # è®¾å®šä¸ºåˆ†ç±»æ•°æ®
            'data': hours,         # æ¯ä¸ªè½´ä¸Šé¢çš„xè½´æ•°æ®
            'top': f"{idx * 100 / num + 10}%",   # zåæ ‡è½´è·ç¦»é¡¶éƒ¨çš„è·ç¦»
            'height':f"{100 / num - 5}%",    # åæ ‡è½´çš„é«˜åº¦
            'gridIndex':idx,      # å› ä¸ºæœ‰å¤šä¸ªè½´,å› æ­¤éœ€è¦è®¾å®šè½´ç´¢å¼•
            'axisLabel': {'interval':2, 'color':'cyan'}, # è½´æ ‡ç­¾çš„é…ç½®,è®¾å®šé—´éš”ä¸º2,é¢œè‰²ä¸ºçº¢è‰²
        })
        titles.append(dict(text=day,top=f'{idx * 100 / num + 5}%',left='0')) # æ¯ä¸ªè½´æœ‰ä¸€ä¸ªæ ‡é¢˜,å¾ªç¯æ·»åŠ å¤šä¸ª
        itemstyle = {
            'normal': {
                'color': JsCode(f"""new echarts.graphic.LinearGradient(0, 0, 1, 1, [
                  {{ offset: 0, color: '{colors[idx]}' }},
                  {{ offset: 1, color: '{colors1[idx]}' }}
                ],)"""),
                'barBorderRadius': [10,10,10,10],      #  æŸ±å­çš„å››ä¸ªè§’åœ†è§’è®¾è®¡
                'shadowColor':'rgba(108,80,243,0.9)', # é˜´å½±çš„é¢œè‰²
                'shadowBlur':5, # é˜´å½±çš„å®½åº¦
            'shadowOffsetX': 2,
            'shadowOffsetY': 2,        
            'width':4,
            }
        }
        sca.add_yaxis('è¿æ¥äººæ•°',   # ç»˜åˆ¶yè½´æ•°æ®,è®¾å®šseriesnameä¸ºç©º
                     y_axis=[[int(item[2]),item[4]] for item in  allinfo if item[0] == day], # è®¾å®šyè½´çš„æ•°æ®
                     symbol_size=JsCode('function(x){console.log(x);return x[2] }'), # è®¾å®šç‚¹çš„å¤§å°,é‡‡ç”¨å›è°ƒè¿›è¡Œè®¾ç½®
                     label_opts=opts.LabelOpts(is_show=False), # å…³é—­ç‚¹ä¸Šé¢çš„æ•°å­—
                      yaxis_index=0,itemstyle_opts=itemstyle                                        
                     )
        sca.add_yaxis('å”¯ä¸€äººæ•°',   # ç»˜åˆ¶yè½´æ•°æ®,è®¾å®šseriesnameä¸ºç©º
                     y_axis=[[int(item[3]),item[5]] for item in  allinfo if item[0] == day], # è®¾å®šyè½´çš„æ•°æ®
                     symbol_size=JsCode('function(x){console.log(x);return x[2] }'), # è®¾å®šç‚¹çš„å¤§å°,é‡‡ç”¨å›è°ƒè¿›è¡Œè®¾ç½®
                     label_opts=opts.LabelOpts(is_show=False), # å…³é—­ç‚¹ä¸Šé¢çš„æ•°å­—
                      yaxis_index=0,itemstyle_opts=itemstyle
                     )
        sca.options['series'][idx * 2]['singleAxisIndex'] =  idx  # è½´ç´¢å¼•è®¾ç½®
        sca.options['series'][idx * 2 + 1]['singleAxisIndex'] =  idx  # è½´ç´¢å¼•è®¾ç½®
        sca.options['series'][idx* 2]['coordinateSystem'] = 'singleAxis'  # å•è½´è®¾å®š
        sca.options['series'][idx* 2 + 1]['coordinateSystem'] = 'singleAxis'  # å•è½´è®¾å®š
    sca.options['singleAxis'] = single_axis  # è®¾å®šå•è½´
    sca.set_global_opts(
        xaxis_opts=opts.AxisOpts(is_show=False),
        yaxis_opts=opts.AxisOpts(is_show=False),
        title_opts = titles,
        legend_opts = opts.LegendOpts(is_show=True,selected_map={'Uv':False},
                selected_mode='single',pos_left='0%',legend_icon='roundRect')
    )
    return sca
sca.render()
```

### Gridç»„ä»¶ç»„åˆå›¾è¡¨

1. ç»„åˆå›¾è¡¨æ—¶å¿…é¡»è¦å…ˆç»„åˆç›´è§’åæ ‡ç³»å›¾è¡¨,ç„¶åæ‰æ˜¯éç›´è§’åæ ‡ç³»å›¾è¡¨,
2. å¤§å¤šæ•°éç›´è§’åæ ‡å›¾å›¾è¡¨,ä½ç½®å‚æ•°éƒ½å¯ä»¥é€šè¿‡è‡ªèº«å‚æ•°è¿›è¡Œè°ƒèŠ‚.
3. è¡¥å……: é€‰é¡¹å¡ç»„å›¾Tabç»„ä»¶,ä¸èƒ½ç»„åˆPage

## å¸¸è§å›¾è¡¨æ ·å¼é…ç½®



